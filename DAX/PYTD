PYTD := 
IF (
    [ShowValueForDates],                                                                    -- only available dates
    VAR PreviousFiscalYear = MAX ( dimDate[Ops Fiscal Year Number] ) - 1                    -- prior year
    VAR LastDayOfFiscalYearAvailable =
        CALCULATE (
            MAX ( dimDate[Ops Day of Fiscal Year Number] ),                                 -- max day of current fiscal year available
            REMOVEFILTERS (                                                  
                dimDate[Ops Day of Week],                                                   -- removes outside filters on day of week and day of week number                 
                dimDate[Ops Day of Week Number]                                  
            ),
            dimDate[DateWithValue] = TRUE                                                   -- only dates with values
        )
    VAR Result =
        CALCULATE (
            [AC],                                                                           -- selected measure
            ALLEXCEPT ( dimDate, dimDate[Ops Day of Week] ),                                -- removes filters except for day of week
            dimDate[Ops Fiscal Year Number] = PreviousFiscalYear,                           -- prior fiscal year
            dimDate[Ops Day of Fiscal Year Number] <= LastDayOfFiscalYearAvailable,         -- same dates, same time period
            dimDate[DateWithValue] = TRUE                                                   -- only dates with values
        )
    RETURN
        Result
)
